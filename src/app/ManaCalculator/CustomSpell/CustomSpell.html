<br>
<div class="row justify-content-center reference">
    <h2>Spell Archive</h2>
    <div class="col">
        <p *ngIf="CustomSpells.length() == 0">There are no spells.</p>
        <div class="accordion" id="accordion-list" *ngIf="CustomSpells.length() > 0">
            <div *ngFor="let spell of CustomSpells.getItems()" class="accordion-item accordion-card">
                <div *ngIf="spell.getCastingInfo(_dataService) as CastingInfo">
                    <div class="row accordion-header" id="heading-{{spell.UniqueId}}">
                        <div class="accordion-button accordion-button-color collapsed" type="button" attr.data-bs-target="#collapse-{{spell.UniqueId}}" data-bs-toggle="collapse">
                            {{spell.SpellName}} | Mana Cost - {{CastingInfo.Cost}} | Casting DC - {{CastingInfo.DC}}
                        </div>
                    </div>

                    <div id="collapse-{{spell.UniqueId}}" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div class="row">
                            <p>Description: {{spell.Description}}</p>
                            <p>Affinity Conflict Bonus: {{CastingInfo.AffinityConflict.Benefit}}
                            </div>
                            <caster-output-control
                                [origin-caster]="_dataService.getOriginCaster(spell.OriginCasterId)"
                                [additional-casters]="_dataService.getAdditionalCasters(spell.AdditionalCasterIdList)" />
                            <spell-level-output-control
                                [spell-level-info]="_dataService.getSpellLevelInfo(spell.SpellLevel)" />
                            <spell-alteration-output-control
                                [spell-alteration-info]="spell.SpellAlteration" />                            
                            <primary-effect-output-control 
                                [primary-effect]="_dataService.getPrimaryEffect(spell.PrimaryEffectId)"
                                (show-popup)="onShowPopup($event)" />
                            <secondary-effect-output-control
                                [secondary-effects]="_dataService.getSecondaryEffects(spell.SecondaryEffectIdList)"
                                (show-popup)="onShowPopup($event)" />
                            <coda-output-control
                                [codas]="_dataService.getCodas(spell.CodaIdList)"
                                (show-popup)="onShowPopup($event)" />
                            <effect-customization-output-control
                                [spell-effect-customizations]="spell.EffectCustomizations"
                                (show-popup)="onShowPopup($event)" />
                            <div class="dropdown">
                                <button type="button" class="btn btn-small confirm-remove dropdown-toggle" id="dropdownMenuButton-{{spell.UniqueId}}" data-bs-toggle="dropdown" aria-expanded="false">
                                    Actions
                                </button>
                                <ul class="dropdown-menu" attr.aria-labelledby="dropdownMenuButton-{{spell.UniqueId}}">
                                    <li><button type="button" class="btn btn-primary dropdown-item" (click)="editCustomSpell(spell)">Edit</button></li>
                                    <li><button type="button" class="btn btn-primary dropdown-item" (click)="removeCustomSpell(spell)">Remove</button></li>
                                    <li><button type="button" class="btn btn-primary dropdown-item" (click)="copyCustomSpellToClipboard(spell)">Copy to Clipboard</button></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="info-mobile">
            <app-popup *ngIf="IsPopupVisible"
                [title]="getPopupTitle()"
                [message]="getPopupMessage()"
                (close)="hidePopup()"/> 
        </div>
    </div>
</div>
<br>
<br>
<br>